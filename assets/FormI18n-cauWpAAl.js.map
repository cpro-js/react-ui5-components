{"version":3,"file":"FormI18n-cauWpAAl.js","sources":["../../src/i18n/FormI18n.tsx"],"sourcesContent":["import React, {\n  FC,\n  ReactNode,\n  createContext,\n  useContext,\n  useMemo,\n} from \"react\";\n\nimport { FormFieldValidation, FormFieldValidationError } from \"../field/types\";\n\nexport type GetValidationErrorMessage = (\n  field: { name: string; value?: string | number | boolean | Date | null },\n  error: FormFieldValidationError,\n  rules: Partial<FormFieldValidation>\n) => string | undefined;\n\nexport interface FormI18nContextProps {\n  getValidationErrorMessage: GetValidationErrorMessage;\n}\n\nexport const FormI18nContext = createContext<FormI18nContextProps>({\n  getValidationErrorMessage(field, error, rules) {\n    return error.message != null && error.message !== \"\"\n      ? error.message\n      : undefined;\n  },\n});\n\nexport interface FormI18nProviderProps {\n  children?: ReactNode;\n  getValidationErrorMessage: GetValidationErrorMessage;\n}\n\nexport const FormI18nProvider: FC<FormI18nProviderProps> = ({\n  children,\n  getValidationErrorMessage,\n}) => {\n  const context = useMemo<FormI18nContextProps>(\n    () => ({\n      getValidationErrorMessage: getValidationErrorMessage,\n    }),\n    [getValidationErrorMessage]\n  );\n\n  return (\n    <FormI18nContext.Provider value={context}>\n      {children}\n    </FormI18nContext.Provider>\n  );\n};\n\nexport const useI18nValidationError = (\n  name: string,\n  rules: Partial<FormFieldValidation>\n) => {\n  const { getValidationErrorMessage } = useContext(FormI18nContext);\n\n  return useMemo(() => {\n    return (error: FormFieldValidationError, value: any): string | undefined =>\n      getValidationErrorMessage(\n        {\n          name,\n          value,\n        },\n        error,\n        rules\n      );\n  }, [name, rules]);\n};\n"],"names":["FormI18nContext","createContext","field","error","rules","FormI18nProvider","children","getValidationErrorMessage","context","useMemo","jsx","useI18nValidationError","name","useContext","value"],"mappings":"oGAoBO,MAAAA,EAAAC,EAAAA,cAAA,CAA4D,0BAAAC,EAAAC,EAAAC,EAAA,CAE/D,OAAAD,EAAA,SAAA,MAAAA,EAAA,UAAA,GAAAA,EAAA,QAAA,MAEI,CAER,CAAA,EAOOE,EAAA,CAAA,CAAqD,SAAAC,EAC1D,0BAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,EAAA,QAAgB,KAAA,CACP,0BAAAF,CACL,GACF,CAAAA,CAAA,CAC0B,EAG5B,OAAAG,EAAAV,EAAA,SAAA,CAAA,MAAAQ,EAAA,SAAAF,CAAA,CAAA,CAKF,EAEOK,EAAA,CAAAC,EAAAR,IAAA,CAIL,KAAA,CAAA,0BAAAG,CAAA,EAAAM,EAAA,WAAAb,CAAA,EAEA,OAAAS,EAAA,QAAA,IACE,CAAAN,EAAAW,IAAAP,EACE,CACE,KAAAK,EACE,MAAAE,CACA,EACFX,EACAC,CACA,EACF,CAAAQ,EAAAR,CAAA,CAAA,CAEN"}