{"version":3,"file":"MultiAutoCompleteField--7CcbLkc.js","sources":["../../src/field/MultiAutoCompleteField.tsx"],"sourcesContent":["import \"../form/formSupport\";\n\nimport { ValueState } from \"@ui5/webcomponents-react\";\nimport {\n  MutableRefObject,\n  ReactElement,\n  Ref,\n  forwardRef,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { useController } from \"react-hook-form\";\n\nimport { DefaultAutoCompleteOption } from \"../component/AutoCompleteModel\";\nimport {\n  MultiAutoComplete,\n  MultiAutoCompleteProps,\n} from \"../component/MultiAutoComplete\";\nimport { useI18nValidationError } from \"../i18n/FormI18n\";\nimport { FormFieldElement, FormFieldValidation } from \"./types\";\nimport { hasError } from \"./util\";\n\nexport type MultiAutoCompleteFieldProps<T = DefaultAutoCompleteOption> = Omit<\n  MultiAutoCompleteProps<T>,\n  \"name\" | \"values\" | \"onChange\" | \"onSelectionChange\" | \"onBlur\"\n> &\n  Pick<FormFieldValidation, \"required\"> & {\n    name: string;\n  };\n\nexport const MultiAutoCompleteField = forwardRef<\n  FormFieldElement,\n  MultiAutoCompleteFieldProps\n>(({ name, required, ...props }, forwardedRef) => {\n  const rules: Partial<FormFieldValidation> = useMemo(\n    () => ({\n      required,\n    }),\n    [required]\n  );\n\n  const getValidationErrorMessage = useI18nValidationError(name, rules);\n\n  const { field, fieldState } = useController({\n    name: name,\n    rules,\n  });\n\n  // store input ref for intenral usage\n  const internalRef = useRef<MultiAutoComplete<DefaultAutoCompleteOption>>();\n  // forward outer ref to custom element\n  useImperativeHandle(forwardedRef, () => ({\n    focus() {\n      if (internalRef.current != null) {\n        internalRef.current.focus();\n      }\n    },\n  }));\n  // forward field ref to stored internal input ref\n  useImperativeHandle(field.ref, () => internalRef.current);\n\n  // get error message (Note: undefined fallbacks to default message of ui5 component)\n  const errorMessage = hasError(fieldState.error)\n    ? getValidationErrorMessage(fieldState.error, field.value)\n    : undefined;\n\n  return (\n    <MultiAutoComplete\n      {...props}\n      ref={\n        internalRef as MutableRefObject<\n          MultiAutoComplete<DefaultAutoCompleteOption>\n        >\n      }\n      name={field.name}\n      values={field.value}\n      onChange={(_, value) => field.onChange(value)}\n      valueState={\n        hasError(fieldState.error) ? ValueState.Error : ValueState.None\n      }\n      valueStateMessage={\n        errorMessage != null && (\n          <div slot=\"valueStateMessage\">{errorMessage}</div>\n        )\n      }\n      onBlur={field.onBlur}\n      required={required}\n    />\n  );\n}) as <T = DefaultAutoCompleteOption>(\n  p: MultiAutoCompleteFieldProps<T> & {\n    ref?: Ref<FormFieldElement | undefined>;\n  }\n) => ReactElement;\n"],"names":["MultiAutoCompleteField","forwardRef","name","required","props","forwardedRef","rules","useMemo","getValidationErrorMessage","useI18nValidationError","field","fieldState","useController","internalRef","useRef","useImperativeHandle","errorMessage","hasError","jsx","MultiAutoComplete","_","value","ValueState"],"mappings":"6WA+BO,MAAAA,EAAAC,EAAA,WAAA,CAAA,CAAA,KAAAC,EAAA,SAAAC,EAAA,GAAAC,CAAA,EAAAC,IAAA,CAIL,MAAAC,EAAAC,EAAA,QAA4C,KAAA,CACnC,SAAAJ,CACL,GACF,CAAAA,CAAA,CACS,EAGXK,EAAAC,EAAAP,EAAAI,CAAA,EAEA,CAAA,MAAAI,EAAA,WAAAC,CAAA,EAAAC,EAAA,CAA4C,KAAAV,EAC1C,MAAAI,CACA,CAAA,EAIFO,EAAAC,EAAAA,SAEAC,EAAA,oBAAAV,EAAA,KAAA,CAAyC,OAAA,CAErCQ,EAAA,SAAA,MACEA,EAAA,QAAA,OACF,CACF,EAAA,EAGFE,EAAAA,oBAAAL,EAAA,IAAA,IAAAG,EAAA,OAAA,EAGA,MAAAG,EAAAC,EAAAN,EAAA,KAAA,EAAAH,EAAAG,EAAA,MAAAD,EAAA,KAAA,EAAA,OAIA,OAAAQ,EACEC,EAAC,CAAA,GAAAf,EACK,IAAAS,EAEF,KAAAH,EAAA,KAIU,OAAAA,EAAA,MACE,SAAA,CAAAU,EAAAC,IAAAX,EAAA,SAAAW,CAAA,EAC8B,WAAAJ,EAAAN,EAAA,KAAA,EAAAW,EAAA,MAAAA,EAAA,KAEiB,kBAAAN,GAAA,MAAAE,EAAA,MAAA,CAAA,KAAA,oBAAA,SAAAF,EAAA,EAIb,OAAAN,EAAA,OAGlC,SAAAP,CACd,CAAA,CAGN,CAAA;;;;;;;;;;;;;;"}