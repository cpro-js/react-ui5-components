{"version":3,"file":"util-5JWwSdnm.js","sources":["../../../../node_modules/@react-hook/latest/dist/module/index.js","../../../../node_modules/@react-hook/debounce/dist/module/index.js","../../src/component/util.ts"],"sourcesContent":["import * as React from 'react';\n\nconst useLatest = current => {\n  const storedValue = React.useRef(current);\n  React.useEffect(() => {\n    storedValue.current = current;\n  });\n  return storedValue;\n};\n\nexport default useLatest;","import * as React from 'react';\nimport useLatest from '@react-hook/latest';\nexport const useDebounceCallback = (callback, wait = 100, leading = false) => {\n  const storedCallback = useLatest(callback);\n  const timeout = React.useRef();\n  const deps = [wait, leading, storedCallback]; // Cleans up pending timeouts when the deps change\n\n  function _ref() {\n    timeout.current && clearTimeout(timeout.current);\n    timeout.current = void 0;\n  }\n\n  React.useEffect(() => _ref, deps);\n\n  function _ref2() {\n    timeout.current = void 0;\n  }\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments;\n    const {\n      current\n    } = timeout; // Calls on leading edge\n\n    if (current === void 0 && leading) {\n      timeout.current = setTimeout(_ref2, wait); // eslint-disable-next-line prefer-spread\n\n      return storedCallback.current.apply(null, args);\n    } // Clear the timeout every call and start waiting again\n\n\n    current && clearTimeout(current); // Waits for `wait` before invoking the callback\n\n    timeout.current = setTimeout(() => {\n      timeout.current = void 0;\n      storedCallback.current.apply(null, args);\n    }, wait);\n  }, deps);\n};\nexport const useDebounce = (initialState, wait, leading) => {\n  const state = React.useState(initialState);\n  return [state[0], useDebounceCallback(state[1], wait, leading), state[1]];\n};","import { useDebounceCallback } from \"@react-hook/debounce\";\nimport { InputDomRef } from \"@ui5/webcomponents-react\";\nimport {\n  KeyboardEvent,\n  MouseEvent,\n  RefObject,\n  useCallback,\n  useEffect,\n  useRef,\n} from \"react\";\n\nexport const triggerSubmitOnEnter = (event: KeyboardEvent<HTMLElement>) => {\n  if (event.key !== \"Enter\" || !(event.target instanceof Element)) {\n    return;\n  }\n\n  // delay dispatch to avoid race conditions between storing new value in onChange and submitting form state in onSubmit\n  setTimeout(() => {\n    triggerSubmit(event);\n  }, 1);\n};\n\nexport const getForm = (\n  event: KeyboardEvent<HTMLElement> | MouseEvent<HTMLElement>,\n  form?: string\n): HTMLFormElement | null => {\n  let formElement: HTMLFormElement | null = null;\n  if (form != null) {\n    formElement = document.getElementById(form) as HTMLFormElement | null;\n  } else if (event.target instanceof Element) {\n    formElement = event.target.closest(\"form\");\n  }\n  return formElement;\n};\n\nexport const triggerSubmit = (\n  event: KeyboardEvent<HTMLElement> | MouseEvent<HTMLElement>,\n  form?: string\n) => {\n  const formElement = getForm(event, form);\n\n  if (formElement != null) {\n    const submitEvent = new SubmitEvent(\"submit\", {\n      bubbles: true,\n      cancelable: true,\n      // submitter: event.target as HTMLElement\n    });\n\n    formElement.dispatchEvent(submitEvent);\n\n    if (!submitEvent.defaultPrevented) {\n      formElement.submit();\n    }\n  }\n};\n\nexport const triggerReset = (\n  event: KeyboardEvent<HTMLElement> | MouseEvent<HTMLElement>,\n  form?: string\n) => {\n  const formElement = getForm(event, form);\n\n  if (formElement != null) {\n    formElement.reset();\n  }\n};\n\nexport const useAllowAction = (\n  initialValue: boolean\n): [RefObject<boolean>, (enabled: boolean) => void] => {\n  const allowActionRef = useRef<boolean>(initialValue);\n  const setAllowActionImmediate = useCallback((allowEnter: boolean) => {\n    allowActionRef.current = allowEnter;\n  }, []);\n  const setAllowActionDebounced = useDebounceCallback(\n    setAllowActionImmediate,\n    50\n  );\n  const setAllowAction = useCallback(\n    (allowEnter: boolean) => {\n      if (allowEnter) {\n        setAllowActionDebounced(true);\n      } else {\n        setAllowActionImmediate(false);\n      }\n    },\n    [setAllowActionImmediate, setAllowActionDebounced]\n  );\n\n  return [allowActionRef, setAllowAction];\n};\n\nexport const useOnChangeWorkaround = (\n  inputRef: RefObject<InputDomRef>,\n  value: string | undefined\n) => {\n  useEffect(() => {\n    if (inputRef.current == null) {\n      return;\n    }\n\n    // workaround: change event is not triggered in the following case\n    //  1. user sets value to \"1234\"\n    //  2. input gets updated after onChange via render prop to \"1\"\n    //  3. user sets value to \"1234\"\n    // => no change will be triggered\n    // @ts-ignore\n    if (inputRef.current._changeFiredValue !== value) {\n      // @ts-ignore\n      inputRef.current._changeFiredValue = null;\n    }\n  }, [value, inputRef]);\n};\n"],"names":["useLatest","current","storedValue","React.useRef","React.useEffect","useLatest$1","useDebounceCallback","callback","wait","leading","storedCallback","timeout","deps","_ref","_ref2","React.useCallback","args","triggerSubmitOnEnter","event","triggerSubmit","getForm","form","formElement","submitEvent","triggerReset","useAllowAction","initialValue","allowActionRef","useRef","setAllowActionImmediate","useCallback","allowEnter","setAllowActionDebounced","setAllowAction","useOnChangeWorkaround","inputRef","value","useEffect"],"mappings":"wCAEA,MAAMA,EAAYC,GAAW,CAC3B,MAAMC,EAAcC,SAAaF,CAAO,EACxCG,OAAAA,EAAAA,UAAgB,IAAM,CACpBF,EAAY,QAAUD,CAC1B,CAAG,EACMC,CACT,EAEAG,EAAeL,ECRFM,EAAsB,CAACC,EAAUC,EAAO,IAAKC,EAAU,KAAU,CAC5E,MAAMC,EAAiBV,EAAUO,CAAQ,EACnCI,EAAUR,EAAAA,SACVS,EAAO,CAACJ,EAAMC,EAASC,CAAc,EAE3C,SAASG,GAAO,CACdF,EAAQ,SAAW,aAAaA,EAAQ,OAAO,EAC/CA,EAAQ,QAAU,MACnB,CAEDP,YAAgB,IAAMS,EAAMD,CAAI,EAEhC,SAASE,GAAQ,CACfH,EAAQ,QAAU,MACnB,CAED,OAAOI,EAAiB,YAAC,UAAY,CAEnC,MAAMC,EAAO,UACP,CACJ,QAAAf,CACD,EAAGU,EAEJ,GAAIV,IAAY,QAAUQ,EACxB,OAAAE,EAAQ,QAAU,WAAWG,EAAON,CAAI,EAEjCE,EAAe,QAAQ,MAAM,KAAMM,CAAI,EAIhDf,GAAW,aAAaA,CAAO,EAE/BU,EAAQ,QAAU,WAAW,IAAM,CACjCA,EAAQ,QAAU,OAClBD,EAAe,QAAQ,MAAM,KAAMM,CAAI,CACxC,EAAER,CAAI,CACR,EAAEI,CAAI,CACT,EC5BaK,EAAwBC,GAAsC,CACrEA,EAAM,MAAQ,SAAW,EAAEA,EAAM,kBAAkB,UAKvD,WAAW,IAAM,CACfC,EAAcD,CAAK,GAClB,CAAC,CACN,EAEaE,EAAU,CACrBF,EACAG,IAC2B,CAC3B,IAAIC,EAAsC,KAC1C,OAAID,GAAQ,KACIC,EAAA,SAAS,eAAeD,CAAI,EACjCH,EAAM,kBAAkB,UACnBI,EAAAJ,EAAM,OAAO,QAAQ,MAAM,GAEpCI,CACT,EAEaH,EAAgB,CAC3BD,EACAG,IACG,CACG,MAAAC,EAAcF,EAAQF,EAAOG,CAAI,EAEvC,GAAIC,GAAe,KAAM,CACjB,MAAAC,EAAc,IAAI,YAAY,SAAU,CAC5C,QAAS,GACT,WAAY,EAAA,CAEb,EAEDD,EAAY,cAAcC,CAAW,EAEhCA,EAAY,kBACfD,EAAY,OAAO,CAEvB,CACF,EAEaE,EAAe,CAC1BN,EACAG,IACG,CACG,MAAAC,EAAcF,EAAQF,EAAOG,CAAI,EAEnCC,GAAe,MACjBA,EAAY,MAAM,CAEtB,EAEaG,EACXC,GACqD,CAC/C,MAAAC,EAAiBC,SAAgBF,CAAY,EAC7CG,EAA0BC,cAAaC,GAAwB,CACnEJ,EAAe,QAAUI,CAC3B,EAAG,CAAE,CAAA,EACCC,EAA0B1B,EAC9BuB,EACA,EAAA,EAEII,EAAiBH,EAAA,YACpBC,GAAwB,CACnBA,EACFC,EAAwB,EAAI,EAE5BH,EAAwB,EAAK,CAEjC,EACA,CAACA,EAAyBG,CAAuB,CAAA,EAG5C,MAAA,CAACL,EAAgBM,CAAc,CACxC,EAEaC,EAAwB,CACnCC,EACAC,IACG,CACHC,EAAAA,UAAU,IAAM,CACVF,EAAS,SAAW,MAUpBA,EAAS,QAAQ,oBAAsBC,IAEzCD,EAAS,QAAQ,kBAAoB,KACvC,EACC,CAACC,EAAOD,CAAQ,CAAC,CACtB","x_google_ignoreList":[0,1]}